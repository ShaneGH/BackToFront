var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(a){a.Initialize=function(c){};var b=(function(){function d(){}d.Require=function c(h){var k=[];for(var e=0;e<(arguments.length-1);e++){k[e]=arguments[e+1]}if(h==null){throw"Item must have a value"}for(var f=0,g=k.length;f<g;f++){var j=k[f];if(!j.allowNull&&h[j.inputName]==null){throw"Property "+j.inputName+" cannot be null"}if(j.inputType&&typeof h[j.inputName]!==j.inputType){throw"Property "+j.inputName+" must be of type "+j.inputType}if(j.inputConstructor&&h[j.inputName].constructor!==j.inputConstructor){throw {message:"Property "+j.inputName+" must be of a give type",type:j.inputConstructor}}}};return d})();a.Sanitizer=b})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert();(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __extends=this.__extends||function(e,c){function a(){this.constructor=e}a.prototype=c.prototype;e.prototype=new a()};var __BTF;(function(a){var d=a.Validation;var c=a.Meta;(function(k){var j=(function(){function q(r){a.Sanitizer.Require(r,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=r.NodeType;this.ExpressionType=r.ExpressionType}q.prototype.Compile=function(){if(!this._Compiled){var r=this._Compile();this._Compiled=function(t,s){if(!s.Break()){r(t,s)}}}return this._Compiled};q.prototype._Compile=function(){throw"Invalid operation"};q.prototype.GetAffectedProperties=function(){return[]};q.CreateExpression=function p(r){switch(r.ExpressionType){case a.Meta.ExpressionWrapperType.Binary:return new e(r);case a.Meta.ExpressionWrapperType.Block:return new f(r);case a.Meta.ExpressionWrapperType.Conditional:return new g(r);case a.Meta.ExpressionWrapperType.Constant:return new h(r);case a.Meta.ExpressionWrapperType.Default:return new i(r);case a.Meta.ExpressionWrapperType.Member:return new l(r);case a.Meta.ExpressionWrapperType.MethodCall:return new m(r);case a.Meta.ExpressionWrapperType.Parameter:return new n(r);case a.Meta.ExpressionWrapperType.Unary:return new o(r)}throw"Invalid expression type"};return q})();k.Expression=j;var e=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!q.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=j.CreateExpression(r.Left);this.Right=j.CreateExpression(r.Right)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Left.Compile();var t=this.Right.Compile();return function(v,u){return q.OperatorDictionary[r.NodeType](s(v,u),t(v,u))}};return q})(j);k.BinaryExpression=e;var f=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(r.Expressions).Select(function(s){return j.CreateExpression(s)}).Result}q.prototype._Compile=function(){var r=linq(this.Expressions).Select(function(s){return s.Compile()}).Result;return function(t,s){return linq(r).Each(function(u){return u(t,s)})}};return q})(j);k.BlockExpression=f;var g=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=j.CreateExpression(r.IfTrue);this.IfFalse=j.CreateExpression(r.IfFalse);this.Test=j.CreateExpression(r.Test)}q.prototype._Compile=function(){var t=this.Test.Compile();var s=this.IfTrue.Compile();var r=this.IfFalse.Compile();return function(v,u){return t(v,u)?s(v,u):r(v,u)}};return q})(j);k.ConditionalExpression=g;var h=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.ConstantExpression=h;var i=(function(p){__extends(q,p);function q(r){p.call(this,r)}q.prototype._Compile=function(){return function(s,r){return null}};return q})(j);k.DefaultExpression=i;var l=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=j.CreateExpression(r.Expression);this.MemberName=r.MemberName}q.RegexValues=(function(){var r="\\[[0-9]+\\]";var s="[_a-zA-Z][_a-zA-Z0-9]*("+r+")?";return{IndexedProperty:new RegExp(r+"$"),Property:new RegExp("^"+s+"$")}})();q.prototype._Compile=function(){var r=this;var s=this.Expression.Compile();return function(w,u){if(!q.RegexValues.Property.test(r.MemberName)){throw"Invalid property name: "+r.MemberName}var t=s(w,u);if(q.RegexValues.IndexedProperty.test(r.MemberName)){var x=r.MemberName.substr(0,r.MemberName.indexOf("[")-1);var v=q.RegexValues.Property.exec(r.MemberName)[0];v=parseInt(v.substring(1,v.length-1));t=t[x];if(t==null){return null}return t[v]}return t[r.MemberName]}};return q})(j);k.MemberExpression=l;var m=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=j.CreateExpression(r.Object);this.Arguments=linq(r.Arguments).Select(function(s){return j.CreateExpression(s)}).Result;this.MethodName=r.MethodName;this.MethodFullName=r.MethodFullName}q.prototype._Compile=function(){throw"Not implemented"};return q})(j);k.MethodCallExpression=m;var n=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Name",inputConstructor:String});this.Name=r.Name}q.prototype._Compile=function(){var r=this;return function(t,s){return t[r.Name]}};return q})(j);k.ParameterExpression=n;var o=(function(p){__extends(q,p);function q(r){p.call(this,r);a.Sanitizer.Require(r,{inputName:"Operand",inputType:"object"});this.Operand=j.CreateExpression(r.Operand)}q.OperatorDictionary=[];q.prototype._Compile=function(){var r=this;var s=this.Operand.Compile();return function(u,t){return q.OperatorDictionary[r.NodeType](s(u,t))}};return q})(j);k.UnaryExpression=o})(a.Expressions||(a.Expressions={}));var b=a.Expressions})(__BTF||(__BTF={}));if(window.__BTF!=null){throw"BackToFront is defined already"}var __BTF;(function(c){c.Initialize=function(a){};var d=(function(){function b(){}b.Require=function a(n){var p=[];for(var i=0;i<(arguments.length-1);i++){p[i]=arguments[i+1]}if(n==null){throw"Item must have a value"}for(var l=0,m=p.length;l<m;l++){var o=p[l];if(!o.allowNull&&n[o.inputName]==null){throw"Property "+o.inputName+" cannot be null"}if(o.inputType&&typeof n[o.inputName]!==o.inputType){throw"Property "+o.inputName+" must be of type "+o.inputType}if(o.inputConstructor&&n[o.inputName].constructor!==o.inputConstructor){throw {message:"Property "+o.inputName+" must be of a give type",type:o.inputConstructor}}}};return b})();c.Sanitizer=d})(__BTF||(__BTF={}));var __extends=this.__extends||function(f,d){function b(){this.constructor=f}b.prototype=d.prototype;f.prototype=new b()};var __BTF;(function(e){var h=e.Validation;var g=e.Meta;(function(r){var q=(function(){function j(k){e.Sanitizer.Require(k,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=k.NodeType;this.ExpressionType=k.ExpressionType}j.prototype.Compile=function(){if(!this._Compiled){var k=this._Compile();this._Compiled=function(m,l){if(!l.Break()){k(m,l)}}}return this._Compiled};j.prototype._Compile=function(){throw"Invalid operation"};j.prototype.GetAffectedProperties=function(){return[]};j.CreateExpression=function i(k){switch(k.ExpressionType){case e.Meta.ExpressionWrapperType.Binary:return new a(k);case e.Meta.ExpressionWrapperType.Block:return new b(k);case e.Meta.ExpressionWrapperType.Conditional:return new c(k);case e.Meta.ExpressionWrapperType.Constant:return new d(k);case e.Meta.ExpressionWrapperType.Default:return new p(k);case e.Meta.ExpressionWrapperType.Member:return new s(k);case e.Meta.ExpressionWrapperType.MethodCall:return new t(k);case e.Meta.ExpressionWrapperType.Parameter:return new u(k);case e.Meta.ExpressionWrapperType.Unary:return new v(k)}throw"Invalid expression type"};return j})();r.Expression=q;var a=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});if(!j.OperatorDictionary[this.NodeType]){throw"Invalid Operator"}this.Left=q.CreateExpression(k.Left);this.Right=q.CreateExpression(k.Right)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Left.Compile();var m=this.Right.Compile();return function(o,n){return j.OperatorDictionary[k.NodeType](l(o,n),m(o,n))}};return j})(q);r.BinaryExpression=a;var b=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return q.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(m,l){return linq(k).Each(function(n){return n(m,l)})}};return j})(q);r.BlockExpression=b;var c=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=q.CreateExpression(k.IfTrue);this.IfFalse=q.CreateExpression(k.IfFalse);this.Test=q.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(o,n){return m(o,n)?l(o,n):k(o,n)}};return j})(q);r.ConditionalExpression=c;var d=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.ConstantExpression=d;var p=(function(i){__extends(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(l,k){return null}};return j})(q);r.DefaultExpression=p;var s=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"MemberName",inputConstructor:String});this.Expression=q.CreateExpression(k.Expression);this.MemberName=k.MemberName}j.RegexValues=(function(){var k="\\[[0-9]+\\]";var l="[_a-zA-Z][_a-zA-Z0-9]*("+k+")?";return{IndexedProperty:new RegExp(k+"$"),Property:new RegExp("^"+l+"$")}})();j.prototype._Compile=function(){var k=this;var l=this.Expression.Compile();return function(y,n){if(!j.RegexValues.Property.test(k.MemberName)){throw"Invalid property name: "+k.MemberName}var m=l(y,n);if(j.RegexValues.IndexedProperty.test(k.MemberName)){var z=k.MemberName.substr(0,k.MemberName.indexOf("[")-1);var o=j.RegexValues.Property.exec(k.MemberName)[0];o=parseInt(o.substring(1,o.length-1));m=m[z];if(m==null){return null}return m[o]}return m[k.MemberName]}};return j})(q);r.MemberExpression=s;var t=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Object",inputType:"object"},{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String},{inputName:"MethodFullName",inputConstructor:String});this.Object=q.CreateExpression(k.Object);this.Arguments=linq(k.Arguments).Select(function(l){return q.CreateExpression(l)}).Result;this.MethodName=k.MethodName;this.MethodFullName=k.MethodFullName}j.prototype._Compile=function(){throw"Not implemented"};return j})(q);r.MethodCallExpression=t;var u=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(m,l){return m[k.Name]}};return j})(q);r.ParameterExpression=u;var v=(function(i){__extends(j,i);function j(k){i.call(this,k);e.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=q.CreateExpression(k.Operand)}j.OperatorDictionary=[];j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(n,m){return j.OperatorDictionary[k.NodeType](l(n,m))}};return j})(q);r.UnaryExpression=v})(e.Expressions||(e.Expressions={}));var f=e.Expressions})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));alert();(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));var __BTF;(function(a){(function(d){var c=(function(){function f(h,g){this.Logic=h;this.AffectedProperties=g}return f})();d.ExpressionInvoker=c;var e=(function(){function f(){}f.prototype.Break=function(){return false};return f})();d.ValidationContext=e})(a.Validation||(a.Validation={}));var b=a.Validation})(__BTF||(__BTF={}));alert("sadsad");(function(b){var c,d,e,g;var j=/^[\w\d_]+(,([\w\d_]+))*$/;var i=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var k=/[\s\t\r\n]/g;var a=function(l,m){return f(l).Union(m).Result};b.Linq=function(l){this.Result=f.utils.transformToArray(l)};b.linq=function(l){return new b.Linq(l?l:[])};var f=b.linq;f.utils={convertLambda:function(l){if(!l||l.constructor===Function){return l}else{if(l.constructor!==String){throw"Invalid linq function"}else{if(l.indexOf("=>")===-1){throw'"=>" expression not found'}}}var n=l.substring(l.indexOf("=>")+2);var m=l.substring(0,l.indexOf("=>")).replace(k,"");if(m.indexOf("(")===0){m=m.substring(1);if(m.indexOf(")")===m.length-1){m=m.substring(0,m.length-1)}else{throw"Invalid left hand side"}}if(m.length<1||!j.test(m)){throw"Invalid left hand side"}else{if(n.length<1){throw"Invalid right hand side"}}if(i.test(n)){return new Function(m,n)}else{return new Function(m,"return "+n+";")}},transformToArray:function(l){if(l.constructor===Array){return l}else{if(l.constructor===b.Linq){return l.Result}else{if(l.constructor===NodeList){return l}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(l){if(l.constructor===b.Linq){return l}else{if(l.constructor===Array){return f(l)}else{throw"Input must be array or Linq object"}}}};f.fn=b.Linq.prototype;f.fn.Select=function(o){o=f.utils.convertLambda(o);var n=f();for(var l=0,m=this.Result.length;l<m;l++){n.Result[l]=o(this.Result[l])}return n};var h=function(m,n){n=f.utils.convertLambda(n);var l=function(p){return p!=null&&p.constructor===Number};var o=(n?m.Select(n):m).Where(l).Result;if(o.length===0){throw"Sequence contains no elements."}return o};f.fn.Max=function(l){return Math.max.apply(Math,h(this,l))};f.fn.Min=function(l){return Math.min.apply(Math,h(this,l))};f.fn.Aggregate=function(l){if(l===undefined){l=a}else{l=f.utils.convertLambda(l)}var o=f();for(var m=0,n=this.Result.length;m<n;m++){o.Result=l(o.Result,this.Result[m])}return o};f.fn.Union=function(l){l=f.utils.transformToArray(l);var p=f();var m;for(m=0,c=this.Result.length;m<c;m++){p.Result[m]=this.Result[m]}for(var n=0,o=l.length;n<o;n++){if(!p.Contains(l[n])){p.Result[m+n]=l[n]}else{m--}}return p};f.fn.Contains=function(l){for(var m=0,n=this.Result.length;m<n;m++){if(this.Result[m]===l){return true}}return false};f.fn.Any=function(n){if(!n){return this.Result.length>0}n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return true}}return false};f.fn.Where=function(p){p=f.utils.convertLambda(p);var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(p(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.First=function(n){if(!n){return this.Result[0]}else{n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){if(n(this.Result[l])){return this.Result[l]}}}return null};f.fn.Last=function(m){if(!m){return this.Result[this.Result.length-1]}else{m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){if(m(this.Result[l])){return this.Result[l]}}}return null};f.fn.GroupBy=function(p){p=f.utils.convertLambda(p);var o=f();var n=null;var q=null;for(var l=0,m=this.Result.length;l<m;l++){n=p(this.Result[l]);q=o.Where(function(r){return r.key===n});if(q.Any()){q.Result[0].values.push(this.Result[l])}else{o.Result.push({key:n,values:[this.Result[l]]})}}return o};f.fn.OrderBy=function(q){q=f.utils.convertLambda(q);var l=new Object();var o=f();var u=[];var t=[];var s=null;for(var m=0,n=this.Result.length;m<n;m++){var p=q?q(this.Result[m]):this.Result[m];u[m]={key:m,value:p};t[m]={key:m,value:this.Result[m]};if(p&&s==null){s=typeof p==="number"?l:p.constructor}else{if(p&&s!==(typeof p==="number"?l:p.constructor)){throw"Invalid comparison type"}}}var r=function(v,w){if(v.value<w.value){return -1}else{if(v.value>w.value){return 1}else{return 0}}};u.sort(r);for(var m=0,n=u.length;m<n;m++){o.Result[m]=f(t).First(function(v){return v.key===u[m].key}).value}return o};f.fn.OrderByDecending=function(m){var l=this.OrderBy(f.utils.convertLambda(m));l.Result.reverse();return l};f.fn.Skip=function(o){var n=f();for(var l=o,m=this.Result.length;l<m;l++){n.Result[l-o]=this.Result[l]}return n};f.fn.Take=function(o){var n=f();var m=o<this.Result.length?o:this.Result.length;for(var l=0;l<m;l++){n.Result[l]=this.Result[l]}return n};f.fn.Distinct=function(){var o=0;var n=f();for(var l=0,m=this.Result.length;l<m;l++){if(!n.Contains(this.Result[l])){n.Result[l-o]=this.Result[l]}else{o++}}return n};f.fn.Each=function(n){n=f.utils.convertLambda(n);for(var l=0,m=this.Result.length;l<m;l++){n(this.Result[l],l)}return this};f.fn.ReverseEach=function(m){m=f.utils.convertLambda(m);for(var l=this.Result.length-1;l>=0;l--){m(this.Result[l],l)}return this}})(window);var __BTF;(function(a){(function(e){(function(f){f._map=[];f.Binary=1;f.Constant=2;f.Member=3;f.MethodCall=4;f.Parameter=5;f.Unary=6;f.Default=7;f.Block=8;f.Conditional=9;f.Invocation=10})(e.ExpressionWrapperType||(e.ExpressionWrapperType={}));var d=e.ExpressionWrapperType;(function(f){f._map=[];f.Add=0;f.AddChecked=1;f.And=2;f.AndAlso=3;f.ArrayLength=4;f.ArrayIndex=5;f.Call=6;f.Coalesce=7;f.Conditional=8;f.Constant=9;f.Convert=10;f.ConvertChecked=11;f.Divide=12;f.Equal=13;f.ExclusiveOr=14;f.GreaterThan=15;f.GreaterThanOrEqual=16;f.Invoke=17;f.Lambda=18;f.LeftShift=19;f.LessThan=20;f.LessThanOrEqual=21;f.ListInit=22;f.MemberAccess=23;f.MemberInit=24;f.Modulo=25;f.Multiply=26;f.MultiplyChecked=27;f.Negate=28;f.UnaryPlus=29;f.NegateChecked=30;f.New=31;f.NewArrayInit=32;f.NewArrayBounds=33;f.Not=34;f.NotEqual=35;f.Or=36;f.OrElse=37;f.Parameter=38;f.Power=39;f.Quote=40;f.RightShift=41;f.Subtract=42;f.SubtractChecked=43;f.TypeAs=44;f.TypeIs=45;f.Assign=46;f.Block=47;f.DebugInfo=48;f.Decrement=49;f.Dynamic=50;f.Default=51;f.Extension=52;f.Goto=53;f.Increment=54;f.Index=55;f.Label=56;f.RuntimeVariables=57;f.Loop=58;f.Switch=59;f.Throw=60;f.Try=61;f.Unbox=62;f.AddAssign=63;f.AndAssign=64;f.DivideAssign=65;f.ExclusiveOrAssign=66;f.LeftShiftAssign=67;f.ModuloAssign=68;f.MultiplyAssign=69;f.OrAssign=70;f.PowerAssign=71;f.RightShiftAssign=72;f.SubtractAssign=73;f.AddAssignChecked=74;f.MultiplyAssignChecked=75;f.SubtractAssignChecked=76;f.PreIncrementAssign=77;f.PreDecrementAssign=78;f.PostIncrementAssign=79;f.PostDecrementAssign=80;f.TypeEqual=81;f.OnesComplement=82;f.IsTrue=83;f.IsFalse=84})(e.ExpressionType||(e.ExpressionType={}));var c=e.ExpressionType})(a.Meta||(a.Meta={}));var b=a.Meta})(__BTF||(__BTF={}));var __BTF;(function(c){(function(b){var a=(function(){function e(j,i){this.Logic=j;this.AffectedProperties=i}return e})();b.ExpressionInvoker=a;var f=(function(){function e(){}e.prototype.Break=function(){return false};return e})();b.ValidationContext=f})(c.Validation||(c.Validation={}));var d=c.Validation})(__BTF||(__BTF={}));(function(m){var n,o,p,r;var u=/^[\w\d_]+(,([\w\d_]+))*$/;var t=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var v=/[\s\t\r\n]/g;var l=function(a,b){return q(a).Union(b).Result};m.Linq=function(a){this.Result=q.utils.transformToArray(a)};m.linq=function(a){return new m.Linq(a?a:[])};var q=m.linq;q.utils={convertLambda:function(a){if(!a||a.constructor===Function){return a}else{if(a.constructor!==String){throw"Invalid linq function"}else{if(a.indexOf("=>")===-1){throw'"=>" expression not found'}}}var c=a.substring(a.indexOf("=>")+2);var b=a.substring(0,a.indexOf("=>")).replace(v,"");if(b.indexOf("(")===0){b=b.substring(1);if(b.indexOf(")")===b.length-1){b=b.substring(0,b.length-1)}else{throw"Invalid left hand side"}}if(b.length<1||!u.test(b)){throw"Invalid left hand side"}else{if(c.length<1){throw"Invalid right hand side"}}if(t.test(c)){return new Function(b,c)}else{return new Function(b,"return "+c+";")}},transformToArray:function(a){if(a.constructor===Array){return a}else{if(a.constructor===m.Linq){return a.Result}else{if(a.constructor===NodeList){return a}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(a){if(a.constructor===m.Linq){return a}else{if(a.constructor===Array){return q(a)}else{throw"Input must be array or Linq object"}}}};q.fn=m.Linq.prototype;q.fn.Select=function(d){d=q.utils.convertLambda(d);var c=q();for(var a=0,b=this.Result.length;a<b;a++){c.Result[a]=d(this.Result[a])}return c};var s=function(b,c){c=q.utils.convertLambda(c);var a=function(e){return e!=null&&e.constructor===Number};var d=(c?b.Select(c):b).Where(a).Result;if(d.length===0){throw"Sequence contains no elements."}return d};q.fn.Max=function(a){return Math.max.apply(Math,s(this,a))};q.fn.Min=function(a){return Math.min.apply(Math,s(this,a))};q.fn.Aggregate=function(a){if(a===undefined){a=l}else{a=q.utils.convertLambda(a)}var d=q();for(var b=0,c=this.Result.length;b<c;b++){d.Result=a(d.Result,this.Result[b])}return d};q.fn.Union=function(a){a=q.utils.transformToArray(a);var e=q();var b;for(b=0,n=this.Result.length;b<n;b++){e.Result[b]=this.Result[b]}for(var c=0,d=a.length;c<d;c++){if(!e.Contains(a[c])){e.Result[b+c]=a[c]}else{b--}}return e};q.fn.Contains=function(a){for(var b=0,c=this.Result.length;b<c;b++){if(this.Result[b]===a){return true}}return false};q.fn.Any=function(c){if(!c){return this.Result.length>0}c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return true}}return false};q.fn.Where=function(e){e=q.utils.convertLambda(e);var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(e(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.First=function(c){if(!c){return this.Result[0]}else{c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){if(c(this.Result[a])){return this.Result[a]}}}return null};q.fn.Last=function(b){if(!b){return this.Result[this.Result.length-1]}else{b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){if(b(this.Result[a])){return this.Result[a]}}}return null};q.fn.GroupBy=function(e){e=q.utils.convertLambda(e);var d=q();var c=null;var f=null;for(var a=0,b=this.Result.length;a<b;a++){c=e(this.Result[a]);f=d.Where(function(g){return g.key===c});if(f.Any()){f.Result[0].values.push(this.Result[a])}else{d.Result.push({key:c,values:[this.Result[a]]})}}return d};q.fn.OrderBy=function(f){f=q.utils.convertLambda(f);var a=new Object();var d=q();var j=[];var i=[];var h=null;for(var b=0,c=this.Result.length;b<c;b++){var e=f?f(this.Result[b]):this.Result[b];j[b]={key:b,value:e};i[b]={key:b,value:this.Result[b]};if(e&&h==null){h=typeof e==="number"?a:e.constructor}else{if(e&&h!==(typeof e==="number"?a:e.constructor)){throw"Invalid comparison type"}}}var g=function(k,x){if(k.value<x.value){return -1}else{if(k.value>x.value){return 1}else{return 0}}};j.sort(g);for(var b=0,c=j.length;b<c;b++){d.Result[b]=q(i).First(function(k){return k.key===j[b].key}).value}return d};q.fn.OrderByDecending=function(b){var a=this.OrderBy(q.utils.convertLambda(b));a.Result.reverse();return a};q.fn.Skip=function(d){var c=q();for(var a=d,b=this.Result.length;a<b;a++){c.Result[a-d]=this.Result[a]}return c};q.fn.Take=function(d){var c=q();var b=d<this.Result.length?d:this.Result.length;for(var a=0;a<b;a++){c.Result[a]=this.Result[a]}return c};q.fn.Distinct=function(){var d=0;var c=q();for(var a=0,b=this.Result.length;a<b;a++){if(!c.Contains(this.Result[a])){c.Result[a-d]=this.Result[a]}else{d++}}return c};q.fn.Each=function(c){c=q.utils.convertLambda(c);for(var a=0,b=this.Result.length;a<b;a++){c(this.Result[a],a)}return this};q.fn.ReverseEach=function(b){b=q.utils.convertLambda(b);for(var a=this.Result.length-1;a>=0;a--){b(this.Result[a],a)}return this}})(window);var __BTF;(function(c){(function(f){(function(e){e._map=[];e.Binary=1;e.Constant=2;e.Member=3;e.MethodCall=4;e.Parameter=5;e.Unary=6;e.Default=7;e.Block=8;e.Conditional=9;e.Invocation=10})(f.ExpressionWrapperType||(f.ExpressionWrapperType={}));var b=f.ExpressionWrapperType;(function(e){e._map=[];e.Add=0;e.AddChecked=1;e.And=2;e.AndAlso=3;e.ArrayLength=4;e.ArrayIndex=5;e.Call=6;e.Coalesce=7;e.Conditional=8;e.Constant=9;e.Convert=10;e.ConvertChecked=11;e.Divide=12;e.Equal=13;e.ExclusiveOr=14;e.GreaterThan=15;e.GreaterThanOrEqual=16;e.Invoke=17;e.Lambda=18;e.LeftShift=19;e.LessThan=20;e.LessThanOrEqual=21;e.ListInit=22;e.MemberAccess=23;e.MemberInit=24;e.Modulo=25;e.Multiply=26;e.MultiplyChecked=27;e.Negate=28;e.UnaryPlus=29;e.NegateChecked=30;e.New=31;e.NewArrayInit=32;e.NewArrayBounds=33;e.Not=34;e.NotEqual=35;e.Or=36;e.OrElse=37;e.Parameter=38;e.Power=39;e.Quote=40;e.RightShift=41;e.Subtract=42;e.SubtractChecked=43;e.TypeAs=44;e.TypeIs=45;e.Assign=46;e.Block=47;e.DebugInfo=48;e.Decrement=49;e.Dynamic=50;e.Default=51;e.Extension=52;e.Goto=53;e.Increment=54;e.Index=55;e.Label=56;e.RuntimeVariables=57;e.Loop=58;e.Switch=59;e.Throw=60;e.Try=61;e.Unbox=62;e.AddAssign=63;e.AndAssign=64;e.DivideAssign=65;e.ExclusiveOrAssign=66;e.LeftShiftAssign=67;e.ModuloAssign=68;e.MultiplyAssign=69;e.OrAssign=70;e.PowerAssign=71;e.RightShiftAssign=72;e.SubtractAssign=73;e.AddAssignChecked=74;e.MultiplyAssignChecked=75;e.SubtractAssignChecked=76;e.PreIncrementAssign=77;e.PreDecrementAssign=78;e.PostIncrementAssign=79;e.PostDecrementAssign=80;e.TypeEqual=81;e.OnesComplement=82;e.IsTrue=83;e.IsFalse=84})(f.ExpressionType||(f.ExpressionType={}));var a=f.ExpressionType})(c.Meta||(c.Meta={}));var d=c.Meta})(__BTF||(__BTF={}));