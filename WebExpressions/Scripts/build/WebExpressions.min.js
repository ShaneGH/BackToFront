(function(){(function(e){var f,g,h,j;var m=/^[\w\d_]+(,([\w\d_]+))*$/;var l=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var n=/[\s\t\r\n]/g;var d=function(o,p){return i(o).Union(p).Result};e.Linq=function(o){this.Result=i.utils.transformToArray(o)};e.linq=function(o){return new e.Linq(o?o:[])};var i=e.linq;i.utils={convertLambda:function(o){if(!o||o.constructor===Function){return o}else{if(o.constructor!==String){throw"Invalid linq function"}else{if(o.indexOf("=>")===-1){throw'"=>" expression not found'}}}var q=o.substring(o.indexOf("=>")+2);var p=o.substring(0,o.indexOf("=>")).replace(n,"");if(p.indexOf("(")===0){p=p.substring(1);if(p.indexOf(")")===p.length-1){p=p.substring(0,p.length-1)}else{throw"Invalid left hand side"}}if(p.length<1||!m.test(p)){throw"Invalid left hand side"}else{if(q.length<1){throw"Invalid right hand side"}}if(l.test(q)){return new Function(p,q)}else{return new Function(p,"return "+q+";")}},transformToArray:function(o){if(o.constructor===Array){return o}else{if(o.constructor===e.Linq){return o.Result}else{if(o.constructor===NodeList){return o}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(o){if(o.constructor===e.Linq){return o}else{if(o.constructor===Array){return i(o)}else{throw"Input must be array or Linq object"}}}};i.fn=e.Linq.prototype;i.fn.Select=function(r){r=i.utils.convertLambda(r);var q=i();for(var o=0,p=this.Result.length;o<p;o++){q.Result[o]=r(this.Result[o])}return q};var k=function(p,q){q=i.utils.convertLambda(q);var o=function(s){return s!=null&&s.constructor===Number};var r=(q?p.Select(q):p).Where(o).Result;if(r.length===0){throw"Sequence contains no elements."}return r};i.fn.Max=function(o){return Math.max.apply(Math,k(this,o))};i.fn.Min=function(o){return Math.min.apply(Math,k(this,o))};i.fn.Aggregate=function(o){if(o===undefined){o=d}else{o=i.utils.convertLambda(o)}var r=i();for(var p=0,q=this.Result.length;p<q;p++){r.Result=o(r.Result,this.Result[p])}return r};i.fn.Union=function(o){o=i.utils.transformToArray(o);var s=i();var p;for(p=0,f=this.Result.length;p<f;p++){s.Result[p]=this.Result[p]}for(var q=0,r=o.length;q<r;q++){if(!s.Contains(o[q])){s.Result[p+q]=o[q]}else{p--}}return s};i.fn.Contains=function(o){for(var p=0,q=this.Result.length;p<q;p++){if(this.Result[p]===o){return true}}return false};i.fn.Any=function(q){if(!q){return this.Result.length>0}q=i.utils.convertLambda(q);for(var o=0,p=this.Result.length;o<p;o++){if(q(this.Result[o])){return true}}return false};i.fn.Where=function(s){s=i.utils.convertLambda(s);var r=0;var q=i();for(var o=0,p=this.Result.length;o<p;o++){if(s(this.Result[o])){q.Result[o-r]=this.Result[o]}else{r++}}return q};i.fn.First=function(q){if(!q){return this.Result[0]}else{q=i.utils.convertLambda(q);for(var o=0,p=this.Result.length;o<p;o++){if(q(this.Result[o])){return this.Result[o]}}}return null};i.fn.Last=function(p){if(!p){return this.Result[this.Result.length-1]}else{p=i.utils.convertLambda(p);for(var o=this.Result.length-1;o>=0;o--){if(p(this.Result[o])){return this.Result[o]}}}return null};i.fn.GroupBy=function(s){s=i.utils.convertLambda(s);var r=i();var q=null;var t=null;for(var o=0,p=this.Result.length;o<p;o++){q=s(this.Result[o]);t=r.Where(function(u){return u.key===q});if(t.Any()){t.Result[0].values.push(this.Result[o])}else{r.Result.push({key:q,values:[this.Result[o]]})}}return r};i.fn.OrderBy=function(t){t=i.utils.convertLambda(t);var o=new Object();var r=i();var x=[];var w=[];var v=null;for(var p=0,q=this.Result.length;p<q;p++){var s=t?t(this.Result[p]):this.Result[p];x[p]={key:p,value:s};w[p]={key:p,value:this.Result[p]};if(s&&v==null){v=typeof s==="number"?o:s.constructor}else{if(s&&v!==(typeof s==="number"?o:s.constructor)){throw"Invalid comparison type"}}}var u=function(y,z){if(y.value<z.value){return -1}else{if(y.value>z.value){return 1}else{return 0}}};x.sort(u);for(var p=0,q=x.length;p<q;p++){r.Result[p]=i(w).First(function(y){return y.key===x[p].key}).value}return r};i.fn.OrderByDecending=function(p){var o=this.OrderBy(i.utils.convertLambda(p));o.Result.reverse();return o};i.fn.Skip=function(r){var q=i();for(var o=r,p=this.Result.length;o<p;o++){q.Result[o-r]=this.Result[o]}return q};i.fn.Take=function(r){var q=i();var p=r<this.Result.length?r:this.Result.length;for(var o=0;o<p;o++){q.Result[o]=this.Result[o]}return q};i.fn.Distinct=function(){var r=0;var q=i();for(var o=0,p=this.Result.length;o<p;o++){if(!q.Contains(this.Result[o])){q.Result[o-r]=this.Result[o]}else{r++}}return q};i.fn.Each=function(q){q=i.utils.convertLambda(q);for(var o=0,p=this.Result.length;o<p;o++){q(this.Result[o],o)}return this};i.fn.ReverseEach=function(p){p=i.utils.convertLambda(p);for(var o=this.Result.length-1;o>=0;o--){p(this.Result[o],o)}return this}})(window);var c;(function(e){(function(h){var g=(function(){function i(j,k){this.Key=j;this.Value=k}return i})();var f=(function(){function i(){this._InnerDictionary=[]}i.prototype.ContainsKey=function(j){return linq(this._InnerDictionary).Any(function(k){return k.Key===j})};i.prototype.Add=function(j,k){if(this.ContainsKey(j)){throw"Dictionary alredy contains the key "+j}this._InnerDictionary.push(new g(j,k))};i.prototype.AddOrReplace=function(k,l){var j=linq(this._InnerDictionary).First(function(m){return m.Key===k});if(j){j.Value=l}else{this._InnerDictionary.push(new g(k,l))}};i.prototype.Value=function(k){var j=linq(this._InnerDictionary).First(function(l){return l.Key===k});return j?j.Value:null};i.prototype.Remove=function(l){for(var j=0,k=this._InnerDictionary.length;j<k;j++){if(this._InnerDictionary[j].Key===l){this._InnerDictionary.splice(j,1);return true}}return false};i.prototype.Merge=function(j){if(j){for(var k=0,l=j._InnerDictionary.length;k<l;k++){var m=j._InnerDictionary[k];this.Add(m.Key,m.Value)}}return this};return i})();h.Dictionary=f})(e.Utils||(e.Utils={}));var d=e.Utils})(c||(c={}));var c;(function(e){(function(h){(function(i){i[i.Binary=1]="Binary";i[i.Constant=2]="Constant";i[i.Member=3]="Member";i[i.StaticMember=4]="StaticMember";i[i.MethodCall=5]="MethodCall";i[i.StaticMethodCall=6]="StaticMethodCall";i[i.Parameter=7]="Parameter";i[i.Unary=8]="Unary";i[i.Default=9]="Default";i[i.Block=10]="Block";i[i.Conditional=11]="Conditional";i[i.Invocation=12]="Invocation";i[i.New=13]="New"})(h.ExpressionWrapperType||(h.ExpressionWrapperType={}));var g=h.ExpressionWrapperType;(function(i){i[i.Add=0]="Add";i[i.AddChecked=1]="AddChecked";i[i.And=2]="And";i[i.AndAlso=3]="AndAlso";i[i.ArrayLength=4]="ArrayLength";i[i.ArrayIndex=5]="ArrayIndex";i[i.Call=6]="Call";i[i.Coalesce=7]="Coalesce";i[i.Conditional=8]="Conditional";i[i.Constant=9]="Constant";i[i.Convert=10]="Convert";i[i.ConvertChecked=11]="ConvertChecked";i[i.Divide=12]="Divide";i[i.Equal=13]="Equal";i[i.ExclusiveOr=14]="ExclusiveOr";i[i.GreaterThan=15]="GreaterThan";i[i.GreaterThanOrEqual=16]="GreaterThanOrEqual";i[i.Invoke=17]="Invoke";i[i.Lambda=18]="Lambda";i[i.LeftShift=19]="LeftShift";i[i.LessThan=20]="LessThan";i[i.LessThanOrEqual=21]="LessThanOrEqual";i[i.ListInit=22]="ListInit";i[i.MemberAccess=23]="MemberAccess";i[i.MemberInit=24]="MemberInit";i[i.Modulo=25]="Modulo";i[i.Multiply=26]="Multiply";i[i.MultiplyChecked=27]="MultiplyChecked";i[i.Negate=28]="Negate";i[i.UnaryPlus=29]="UnaryPlus";i[i.NegateChecked=30]="NegateChecked";i[i.New=31]="New";i[i.NewArrayInit=32]="NewArrayInit";i[i.NewArrayBounds=33]="NewArrayBounds";i[i.Not=34]="Not";i[i.NotEqual=35]="NotEqual";i[i.Or=36]="Or";i[i.OrElse=37]="OrElse";i[i.Parameter=38]="Parameter";i[i.Power=39]="Power";i[i.Quote=40]="Quote";i[i.RightShift=41]="RightShift";i[i.Subtract=42]="Subtract";i[i.SubtractChecked=43]="SubtractChecked";i[i.TypeAs=44]="TypeAs";i[i.TypeIs=45]="TypeIs";i[i.Assign=46]="Assign";i[i.Block=47]="Block";i[i.DebugInfo=48]="DebugInfo";i[i.Decrement=49]="Decrement";i[i.Dynamic=50]="Dynamic";i[i.Default=51]="Default";i[i.Extension=52]="Extension";i[i.Goto=53]="Goto";i[i.Increment=54]="Increment";i[i.Index=55]="Index";i[i.Label=56]="Label";i[i.RuntimeVariables=57]="RuntimeVariables";i[i.Loop=58]="Loop";i[i.Switch=59]="Switch";i[i.Throw=60]="Throw";i[i.Try=61]="Try";i[i.Unbox=62]="Unbox";i[i.AddAssign=63]="AddAssign";i[i.AndAssign=64]="AndAssign";i[i.DivideAssign=65]="DivideAssign";i[i.ExclusiveOrAssign=66]="ExclusiveOrAssign";i[i.LeftShiftAssign=67]="LeftShiftAssign";i[i.ModuloAssign=68]="ModuloAssign";i[i.MultiplyAssign=69]="MultiplyAssign";i[i.OrAssign=70]="OrAssign";i[i.PowerAssign=71]="PowerAssign";i[i.RightShiftAssign=72]="RightShiftAssign";i[i.SubtractAssign=73]="SubtractAssign";i[i.AddAssignChecked=74]="AddAssignChecked";i[i.MultiplyAssignChecked=75]="MultiplyAssignChecked";i[i.SubtractAssignChecked=76]="SubtractAssignChecked";i[i.PreIncrementAssign=77]="PreIncrementAssign";i[i.PreDecrementAssign=78]="PreDecrementAssign";i[i.PostIncrementAssign=79]="PostIncrementAssign";i[i.PostDecrementAssign=80]="PostDecrementAssign";i[i.TypeEqual=81]="TypeEqual";i[i.OnesComplement=82]="OnesComplement";i[i.IsTrue=83]="IsTrue";i[i.IsFalse=84]="IsFalse"})(h.ExpressionType||(h.ExpressionType={}));var f=h.ExpressionType})(e.Meta||(e.Meta={}));var d=e.Meta})(c||(c={}));var c;(function(e){var d=(function(){function f(g){e.Sanitizer.Require(g,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=g.NodeType;this.ExpressionType=g.ExpressionType}f.prototype.Compile=function(){if(!this._Compiled){this._Compiled=this._Compile()}return this._Compiled};f.prototype._Compile=function(){throw"Invalid operation"};f.prototype.GetAffectedProperties=function(){return[]};f.CreateExpression=function(g){if(g.NodeType===e.Meta.ExpressionType.Assign&&g.ExpressionType===e.Meta.ExpressionWrapperType.Binary){return new e.AssignmentExpression(g)}if(f.ExpressionConstructorDictionary[g.ExpressionType]){return f.ExpressionConstructorDictionary[g.ExpressionType](g)}throw"Invalid expression type"};f.ExpressionConstructorDictionary=(function(){var g={};g[e.Meta.ExpressionWrapperType.Binary]=function(h){return new e.BinaryExpression(h)};g[e.Meta.ExpressionWrapperType.Block]=function(h){return new e.BlockExpression(h)};g[e.Meta.ExpressionWrapperType.Conditional]=function(h){return new e.ConditionalExpression(h)};g[e.Meta.ExpressionWrapperType.Constant]=function(h){return new e.ConstantExpression(h)};g[e.Meta.ExpressionWrapperType.Default]=function(h){return new e.DefaultExpression(h)};g[e.Meta.ExpressionWrapperType.Member]=function(h){return new e.MemberExpression(h)};g[e.Meta.ExpressionWrapperType.StaticMember]=function(h){return new e.StaticMemberExpression(h)};g[e.Meta.ExpressionWrapperType.MethodCall]=function(h){return new e.MethodCallExpression(h)};g[e.Meta.ExpressionWrapperType.StaticMethodCall]=function(h){return new e.StaticMethodCallExpression(h)};g[e.Meta.ExpressionWrapperType.Parameter]=function(h){return new e.ParameterExpression(h)};g[e.Meta.ExpressionWrapperType.Unary]=function(h){return new e.UnaryExpression(h)};g[e.Meta.ExpressionWrapperType.Invocation]=function(h){return new e.InvocationExpression(h)};g[e.Meta.ExpressionWrapperType.New]=function(h){return new e.NewExpression(h)};return g})();return f})();e.Expression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});switch(h.Left.ExpressionType){case e.Meta.ExpressionWrapperType.Parameter:this.Left=null;this.LeftProperty=(h.Left).Name;break;case e.Meta.ExpressionWrapperType.StaticMember:case e.Meta.ExpressionWrapperType.Member:this.Left=e.Expression.CreateExpression((h.Left).Expression);this.LeftProperty=(h.Left).MemberName;break;default:throw"The left hand side of an assignment must be a parameter or a member"}this.Right=e.Expression.CreateExpression(h.Right)}g.prototype._Compile=function(){var h=this;var i=this.Left?this.Left.Compile():function(k){return k};var j=this.Right.Compile();return function(k){return i(k)[h.LeftProperty]=j(k)}};return g})(e.Expression);e.AssignmentExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(f){var e=f.Meta;var d=(function(g){a(h,g);function h(i){g.call(this,i);if(!h.OperatorDictionary[this.NodeType]){throw"##Invalid Operator"}f.Sanitizer.Require(i,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});this.Left=f.Expression.CreateExpression(i.Left);this.Right=f.Expression.CreateExpression(i.Right)}h.prototype._Compile=function(){var i=this;if(!h.OperatorStringDictionary[this.NodeType]){throw"Invalid expression type"}var j=this.Left.Compile();var k=this.Right.Compile();return function(l){return h.OperatorDictionary[i.NodeType](j(l),k(l))}};h.OperatorDictionary=(function(){var i=[];i[f.Meta.ExpressionType.Add]=function(j,k){return j+k};i[f.Meta.ExpressionType.AndAlso]=function(j,k){return j&&k};i[f.Meta.ExpressionType.Divide]=function(j,k){return j/k};i[f.Meta.ExpressionType.Equal]=function(j,k){return j===k};i[f.Meta.ExpressionType.GreaterThan]=function(j,k){return j>k};i[f.Meta.ExpressionType.GreaterThanOrEqual]=function(j,k){return j>=k};i[f.Meta.ExpressionType.LessThan]=function(j,k){return j<k};i[f.Meta.ExpressionType.LessThanOrEqual]=function(j,k){return j<=k};i[f.Meta.ExpressionType.Multiply]=function(j,k){return j*k};i[f.Meta.ExpressionType.NotEqual]=function(j,k){return j!==k};i[f.Meta.ExpressionType.OrElse]=function(j,k){return j||k};i[f.Meta.ExpressionType.Subtract]=function(j,k){return j-k};return i})();h.OperatorStringDictionary=(function(){var i=[];i[f.Meta.ExpressionType.Add]=" + ";i[f.Meta.ExpressionType.AndAlso]=" && ";i[f.Meta.ExpressionType.Divide]=" / ";i[f.Meta.ExpressionType.Equal]=" === ";i[f.Meta.ExpressionType.GreaterThan]=" > ";i[f.Meta.ExpressionType.GreaterThanOrEqual]=" >= ";i[f.Meta.ExpressionType.LessThan]=" < ";i[f.Meta.ExpressionType.LessThanOrEqual]=" <= ";i[f.Meta.ExpressionType.Multiply]=" * ";i[f.Meta.ExpressionType.NotEqual]=" !== ";i[f.Meta.ExpressionType.OrElse]=" || ";i[f.Meta.ExpressionType.Subtract]=" - ";return i})();return h})(f.Expression);f.BinaryExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(h.Expressions).Select(function(i){return e.Expression.CreateExpression(i)}).Result}g.prototype._Compile=function(){var h=linq(this.Expressions).Select(function(i){return i.Compile()}).Result;return function(i){return linq(h).Each(function(j){return j(i)})}};return g})(e.Expression);e.BlockExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=e.Expression.CreateExpression(h.IfTrue);this.IfFalse=e.Expression.CreateExpression(h.IfFalse);this.Test=e.Expression.CreateExpression(h.Test)}g.prototype._Compile=function(){var j=this.Test.Compile();var i=this.IfTrue.Compile();var h=this.IfFalse.Compile();return function(k){return j(k)?i(k):h(k)}};return g})(e.Expression);e.ConditionalExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);this.Value=h.Value}g.prototype._Compile=function(){var h=this;return function(i){return h.Value}};g.ConstantParameter="__constants";g.GenerateConstantId=(function(){var h=0;return function(){return"constant-"+(++h)}})();return g})(e.Expression);e.ConstantExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h)}g.prototype._Compile=function(){return function(h){return null}};return g})(e.Expression);e.DefaultExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"Expression",inputType:"object"},{inputName:"Arguments",inputConstructor:Array});this.Expression=e.Expression.CreateExpression(h.Expression);this.Arguments=linq(h.Arguments).Select(function(i){return e.Expression.CreateExpression(i)}).Result}g.prototype._Compile=function(){var i=this.Expression.Compile();var h=linq(this.Arguments).Select(function(j){return j.Compile()}).Result;return function(j){var k=i(j);var l=linq(h).Select(function(m){return m(j)}).Result;return k.apply(j,l)}};return g})(e.Expression);e.InvocationExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(g){var e=(function(h){a(i,h);function i(j){h.call(this,j);g.Sanitizer.Require(j,{inputName:"MemberName",inputConstructor:String});this.MemberName=j.MemberName}i.prototype._Compile=function(){if(!i.PropertyRegex.test(this.MemberName)){throw"Invalid property name: "+this.MemberName}var k=this.MemberName;var j=this._CompileMemberContext();return function(l){return j(l)[k]}};i.prototype._CompileMemberContext=function(){throw"This method is abstract"};i.PropertyRegex=new RegExp("^[_a-zA-Z][_a-zA-Z0-9]*$");return i})(g.Expression);g.MemberExpressionBase=e;var d=(function(h){a(i,h);function i(j){h.call(this,j);g.Sanitizer.Require(j,{inputName:"Expression",inputType:"object"});this.Expression=g.Expression.CreateExpression(j.Expression)}i.prototype._CompileMemberContext=function(){return this.Expression.Compile()};return i})(e);g.MemberExpression=d;var f=(function(h){a(i,h);function i(j){h.call(this,j);g.Sanitizer.Require(j,{inputName:"Class",inputType:"string"});this.Class=i.SplitNamespace(j.Class)}i.SplitNamespace=function(j){var k=j.split(".");linq(k).Each(function(l){if(!e.PropertyRegex.test(l)){throw"Invalid namespace part "+l}});return k};i.prototype._CompileMemberContext=function(){return i.GetClass(this.Class)};i.GetClass=function(j){var m=window;for(var k=0,l=j.length;k<l;k++){m=m[j[k]];if(m==undefined){throw"Cannot evaluate member "+j.join(".")}}return function(n){return m}};return i})(e);g.StaticMemberExpression=f})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(g){var e=(function(h){a(i,h);function i(j){h.call(this,j);g.Sanitizer.Require(j,{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String});this.Arguments=linq(j.Arguments).Select(function(k){return g.Expression.CreateExpression(k)}).Result;this.MethodName=j.MethodName}i.prototype._Compile=function(){var j=this;if(!g.MemberExpressionBase.PropertyRegex.test(this.MethodName)){throw"Invalid method name: "+this.MethodName}var l=this.MethodName;var m=this._CompileMethodCallContext();var k=linq(this.Arguments).Select(function(n){return n.Compile()}).Result;return function(n){var q=linq(k).Select(function(o){return o(n)}).Result;var p=m(n);return p[j.MethodName].apply(p,q)}};i.prototype._CompileMethodCallContext=function(){throw"This method is abstract"};return i})(g.Expression);g.MethodCallExpressionBase=e;var d=(function(h){a(i,h);function i(j){h.call(this,j);g.Sanitizer.Require(j,{inputName:"Object",inputType:"object"});this.Object=g.Expression.CreateExpression(j.Object)}i.prototype._CompileMethodCallContext=function(){return this.Object.Compile()};i.RegisteredMethods={};return i})(e);g.MethodCallExpression=d;var f=(function(h){a(i,h);function i(j){h.call(this,j);g.Sanitizer.Require(j,{inputName:"Class",inputType:"string"});this.Class=g.StaticMemberExpression.SplitNamespace(j.Class)}i.prototype._CompileMethodCallContext=function(){return g.StaticMemberExpression.GetClass(this.Class)};return i})(e);g.StaticMethodCallExpression=f})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"Arguments",inputConstructor:Array},{inputName:"IsAnonymous",inputConstructor:Boolean},{inputName:"Type",inputConstructor:String});if(h.IsAnonymous){e.Sanitizer.Require(h,{inputName:"Members",inputConstructor:Array});if(h.Members.length!==h.Arguments.length){throw"If members are defined, each must have a corresponding argument"}}this.Arguments=linq(h.Arguments).Select(function(i){return e.Expression.CreateExpression(i)}).Result;this.Members=h.Members;this.Type=h.Type;this.IsAnonymous=h.IsAnonymous}g.prototype._Compile=function(){var h=this;var i=linq(this.Arguments).Select(function(j){return j.Compile()}).Result;return function(j){var k=linq(i).Select(function(l){return l(j)}).Result;if(h.IsAnonymous){return h.ConstructAnonymous(k)}else{if(g.RegisteredTypes[h.Type]){return g.Construct(g.RegisteredTypes[h.Type],k)}else{return{}}}}};g.prototype.ConstructAnonymous=function(l){var k={};for(var h=0,j=this.Members.length;h<j;h++){k[this.Members[h]]=l[h]}return k};g.Construct=function(i,h){var j=Object.create(i.prototype);var k=i.apply(j,h);return typeof k==="object"?k:j};g.RegisteredTypes={};return g})(e.Expression);e.NewExpression=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"Name",inputConstructor:String});this.Name=h.Name}g.prototype._Compile=function(){var h=this;return function(i){return i[h.Name]}};return g})(e.Expression);e.ParameterExpression=d})(c||(c={}));var c;(function(e){e.Initialize=function(f){};var d=(function(){function f(){}f.Require=function(k){var m=[];for(var g=0;g<(arguments.length-1);g++){m[g]=arguments[g+1]}if(k==null){throw"Item must have a value"}for(var h=0,j=m.length;h<j;h++){var l=m[h];if(l.allowNull&&k[l.inputName]==null){return}if(!l.allowNull&&k[l.inputName]==null){throw"Property "+l.inputName+" cannot be null"}if(l.inputType&&typeof k[l.inputName]!==l.inputType){throw"Property "+l.inputName+" must be of type "+l.inputType}if(l.inputConstructor&&k[l.inputName].constructor!==l.inputConstructor){throw {message:"Property "+l.inputName+" must be of a give type",type:l.inputConstructor}}}};return f})();e.Sanitizer=d})(c||(c={}));var a=this.__extends||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};var c;(function(e){var d=(function(f){a(g,f);function g(h){f.call(this,h);e.Sanitizer.Require(h,{inputName:"Operand",inputType:"object"});this.Operand=e.Expression.CreateExpression(h.Operand)}g.prototype._Compile=function(){var h=this;var i=this.Operand.Compile();return function(j){return g.OperatorDictionary[h.NodeType](i(j))}};g.OperatorDictionary=(function(){var h=[];h[e.Meta.ExpressionType.Convert]=function(i){return i};h[e.Meta.ExpressionType.Not]=function(i){return !i};return h})();g.OperatorStringDictionary=(function(){var h=[];h[e.Meta.ExpressionType.Convert]=function(i){return i};h[e.Meta.ExpressionType.Not]=function(i){return"!"+i};return h})();return g})(e.Expression);e.UnaryExpression=d})(c||(c={}));var b=(function(){function d(){}d.createExpression=c.Expression.CreateExpression;d.registeredConstructors=c.NewExpression.RegisteredTypes;d.registeredMethods=c.MethodCallExpression.RegisteredMethods;return d})();window.ex=b})();