(function(){(function(h){var i,j,k,m;var p=/^[\w\d_]+(,([\w\d_]+))*$/;var o=/^[\s\t\r\n]*\{.*\}[\s\t\r\n]*$/;var q=/[\s\t\r\n]/g;var g=function(r,s){return l(r).Union(s).Result};h.Linq=function(r){this.Result=l.utils.transformToArray(r)};h.linq=function(r){return new h.Linq(r?r:[])};var l=h.linq;l.utils={convertLambda:function(r){if(!r||r.constructor===Function){return r}else{if(r.constructor!==String){throw"Invalid linq function"}else{if(r.indexOf("=>")===-1){throw'"=>" expression not found'}}}var t=r.substring(r.indexOf("=>")+2);var s=r.substring(0,r.indexOf("=>")).replace(q,"");if(s.indexOf("(")===0){s=s.substring(1);if(s.indexOf(")")===s.length-1){s=s.substring(0,s.length-1)}else{throw"Invalid left hand side"}}if(s.length<1||!p.test(s)){throw"Invalid left hand side"}else{if(t.length<1){throw"Invalid right hand side"}}if(o.test(t)){return new Function(s,t)}else{return new Function(s,"return "+t+";")}},transformToArray:function(r){if(r.constructor===Array){return r}else{if(r.constructor===h.Linq){return r.Result}else{if(r.constructor===NodeList){return r}else{throw"Input must be array or Linq object"}}}},transformToLinq:function(r){if(r.constructor===h.Linq){return r}else{if(r.constructor===Array){return l(r)}else{throw"Input must be array or Linq object"}}}};l.fn=h.Linq.prototype;l.fn.Select=function(u){u=l.utils.convertLambda(u);var t=l();for(var r=0,s=this.Result.length;r<s;r++){t.Result[r]=u(this.Result[r])}return t};var n=function(s,t){t=l.utils.convertLambda(t);var r=function(v){return v!=null&&v.constructor===Number};var u=(t?s.Select(t):s).Where(r).Result;if(u.length===0){throw"Sequence contains no elements."}return u};l.fn.Max=function(r){return Math.max.apply(Math,n(this,r))};l.fn.Min=function(r){return Math.min.apply(Math,n(this,r))};l.fn.Aggregate=function(r){if(r===undefined){r=g}else{r=l.utils.convertLambda(r)}var u=l();for(var s=0,t=this.Result.length;s<t;s++){u.Result=r(u.Result,this.Result[s])}return u};l.fn.Union=function(r){r=l.utils.transformToArray(r);var v=l();var s;for(s=0,i=this.Result.length;s<i;s++){v.Result[s]=this.Result[s]}for(var t=0,u=r.length;t<u;t++){if(!v.Contains(r[t])){v.Result[s+t]=r[t]}else{s--}}return v};l.fn.Contains=function(r){for(var s=0,t=this.Result.length;s<t;s++){if(this.Result[s]===r){return true}}return false};l.fn.Any=function(t){if(!t){return this.Result.length>0}t=l.utils.convertLambda(t);for(var r=0,s=this.Result.length;r<s;r++){if(t(this.Result[r])){return true}}return false};l.fn.Where=function(v){v=l.utils.convertLambda(v);var u=0;var t=l();for(var r=0,s=this.Result.length;r<s;r++){if(v(this.Result[r])){t.Result[r-u]=this.Result[r]}else{u++}}return t};l.fn.First=function(t){if(!t){return this.Result[0]}else{t=l.utils.convertLambda(t);for(var r=0,s=this.Result.length;r<s;r++){if(t(this.Result[r])){return this.Result[r]}}}return null};l.fn.Last=function(s){if(!s){return this.Result[this.Result.length-1]}else{s=l.utils.convertLambda(s);for(var r=this.Result.length-1;r>=0;r--){if(s(this.Result[r])){return this.Result[r]}}}return null};l.fn.GroupBy=function(v){v=l.utils.convertLambda(v);var u=l();var t=null;var w=null;for(var r=0,s=this.Result.length;r<s;r++){t=v(this.Result[r]);w=u.Where(function(x){return x.key===t});if(w.Any()){w.Result[0].values.push(this.Result[r])}else{u.Result.push({key:t,values:[this.Result[r]]})}}return u};l.fn.OrderBy=function(w){w=l.utils.convertLambda(w);var r=new Object();var u=l();var A=[];var z=[];var y=null;for(var s=0,t=this.Result.length;s<t;s++){var v=w?w(this.Result[s]):this.Result[s];A[s]={key:s,value:v};z[s]={key:s,value:this.Result[s]};if(v&&y==null){y=typeof v==="number"?r:v.constructor}else{if(v&&y!==(typeof v==="number"?r:v.constructor)){throw"Invalid comparison type"}}}var x=function(B,C){if(B.value<C.value){return -1}else{if(B.value>C.value){return 1}else{return 0}}};A.sort(x);for(var s=0,t=A.length;s<t;s++){u.Result[s]=l(z).First(function(B){return B.key===A[s].key}).value}return u};l.fn.OrderByDecending=function(s){var r=this.OrderBy(l.utils.convertLambda(s));r.Result.reverse();return r};l.fn.Skip=function(u){var t=l();for(var r=u,s=this.Result.length;r<s;r++){t.Result[r-u]=this.Result[r]}return t};l.fn.Take=function(u){var t=l();var s=u<this.Result.length?u:this.Result.length;for(var r=0;r<s;r++){t.Result[r]=this.Result[r]}return t};l.fn.Distinct=function(){var u=0;var t=l();for(var r=0,s=this.Result.length;r<s;r++){if(!t.Contains(this.Result[r])){t.Result[r-u]=this.Result[r]}else{u++}}return t};l.fn.Each=function(t){t=l.utils.convertLambda(t);for(var r=0,s=this.Result.length;r<s;r++){t(this.Result[r],r)}return this};l.fn.ReverseEach=function(s){s=l.utils.convertLambda(s);for(var r=this.Result.length-1;r>=0;r--){s(this.Result[r],r)}return this}})(window);var e;(function(h){var g=(function(){function i(j,k){this.x=j;this.y=k}i.prototype.getDist=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};i.origin=new i(0,0);return i})();h.Point=g})(e||(e={}));var d=new e.Point(3,4);var b=d.getDist();var f;(function(h){(function(l){var i=(function(){function m(){}m.GetClass=function(n){var q=window;for(var o=0,p=n.length;o<p;o++){q=q[n[o]];if(q==undefined){throw"Cannot evaluate member "+n.join(".")}}return q};m.SplitNamespace=function(n){var o=n.split(".");linq(o).Each(function(p){if(!m.PropertyRegex.test(p)){throw"Invalid namespace part "+p}});return o};m.PropertyRegex=new RegExp("^[_a-zA-Z][_a-zA-Z0-9]*$");return m})();l.CustomClassHandler=i;var k=(function(){function m(n,o){this.Key=n;this.Value=o}return m})();var j=(function(){function m(){this._InnerDictionary=[]}m.prototype.ContainsKey=function(n){return linq(this._InnerDictionary).Any(function(o){return o.Key===n})};m.prototype.Add=function(n,o){if(this.ContainsKey(n)){throw"Dictionary alredy contains the key "+n}this._InnerDictionary.push(new k(n,o))};m.prototype.AddOrReplace=function(o,p){var n=linq(this._InnerDictionary).First(function(q){return q.Key===o});if(n){n.Value=p}else{this._InnerDictionary.push(new k(o,p))}};m.prototype.Value=function(o){var n=linq(this._InnerDictionary).First(function(p){return p.Key===o});return n?n.Value:null};m.prototype.Remove=function(p){for(var n=0,o=this._InnerDictionary.length;n<o;n++){if(this._InnerDictionary[n].Key===p){this._InnerDictionary.splice(n,1);return true}}return false};m.prototype.Merge=function(n){if(n){for(var o=0,p=n._InnerDictionary.length;o<p;o++){var q=n._InnerDictionary[o];this.Add(q.Key,q.Value)}}return this};return m})();l.Dictionary=j})(h.Utils||(h.Utils={}));var g=h.Utils})(f||(f={}));var f;(function(h){(function(k){(function(l){l[l.Binary=1]="Binary";l[l.Constant=2]="Constant";l[l.Member=3]="Member";l[l.StaticMember=4]="StaticMember";l[l.MethodCall=5]="MethodCall";l[l.StaticMethodCall=6]="StaticMethodCall";l[l.Parameter=7]="Parameter";l[l.Unary=8]="Unary";l[l.Default=9]="Default";l[l.Block=10]="Block";l[l.Conditional=11]="Conditional";l[l.Invocation=12]="Invocation";l[l.New=13]="New"})(k.ExpressionWrapperType||(k.ExpressionWrapperType={}));var j=k.ExpressionWrapperType;(function(l){l[l.Add=0]="Add";l[l.AddChecked=1]="AddChecked";l[l.And=2]="And";l[l.AndAlso=3]="AndAlso";l[l.ArrayLength=4]="ArrayLength";l[l.ArrayIndex=5]="ArrayIndex";l[l.Call=6]="Call";l[l.Coalesce=7]="Coalesce";l[l.Conditional=8]="Conditional";l[l.Constant=9]="Constant";l[l.Convert=10]="Convert";l[l.ConvertChecked=11]="ConvertChecked";l[l.Divide=12]="Divide";l[l.Equal=13]="Equal";l[l.ExclusiveOr=14]="ExclusiveOr";l[l.GreaterThan=15]="GreaterThan";l[l.GreaterThanOrEqual=16]="GreaterThanOrEqual";l[l.Invoke=17]="Invoke";l[l.Lambda=18]="Lambda";l[l.LeftShift=19]="LeftShift";l[l.LessThan=20]="LessThan";l[l.LessThanOrEqual=21]="LessThanOrEqual";l[l.ListInit=22]="ListInit";l[l.MemberAccess=23]="MemberAccess";l[l.MemberInit=24]="MemberInit";l[l.Modulo=25]="Modulo";l[l.Multiply=26]="Multiply";l[l.MultiplyChecked=27]="MultiplyChecked";l[l.Negate=28]="Negate";l[l.UnaryPlus=29]="UnaryPlus";l[l.NegateChecked=30]="NegateChecked";l[l.New=31]="New";l[l.NewArrayInit=32]="NewArrayInit";l[l.NewArrayBounds=33]="NewArrayBounds";l[l.Not=34]="Not";l[l.NotEqual=35]="NotEqual";l[l.Or=36]="Or";l[l.OrElse=37]="OrElse";l[l.Parameter=38]="Parameter";l[l.Power=39]="Power";l[l.Quote=40]="Quote";l[l.RightShift=41]="RightShift";l[l.Subtract=42]="Subtract";l[l.SubtractChecked=43]="SubtractChecked";l[l.TypeAs=44]="TypeAs";l[l.TypeIs=45]="TypeIs";l[l.Assign=46]="Assign";l[l.Block=47]="Block";l[l.DebugInfo=48]="DebugInfo";l[l.Decrement=49]="Decrement";l[l.Dynamic=50]="Dynamic";l[l.Default=51]="Default";l[l.Extension=52]="Extension";l[l.Goto=53]="Goto";l[l.Increment=54]="Increment";l[l.Index=55]="Index";l[l.Label=56]="Label";l[l.RuntimeVariables=57]="RuntimeVariables";l[l.Loop=58]="Loop";l[l.Switch=59]="Switch";l[l.Throw=60]="Throw";l[l.Try=61]="Try";l[l.Unbox=62]="Unbox";l[l.AddAssign=63]="AddAssign";l[l.AndAssign=64]="AndAssign";l[l.DivideAssign=65]="DivideAssign";l[l.ExclusiveOrAssign=66]="ExclusiveOrAssign";l[l.LeftShiftAssign=67]="LeftShiftAssign";l[l.ModuloAssign=68]="ModuloAssign";l[l.MultiplyAssign=69]="MultiplyAssign";l[l.OrAssign=70]="OrAssign";l[l.PowerAssign=71]="PowerAssign";l[l.RightShiftAssign=72]="RightShiftAssign";l[l.SubtractAssign=73]="SubtractAssign";l[l.AddAssignChecked=74]="AddAssignChecked";l[l.MultiplyAssignChecked=75]="MultiplyAssignChecked";l[l.SubtractAssignChecked=76]="SubtractAssignChecked";l[l.PreIncrementAssign=77]="PreIncrementAssign";l[l.PreDecrementAssign=78]="PreDecrementAssign";l[l.PostIncrementAssign=79]="PostIncrementAssign";l[l.PostDecrementAssign=80]="PostDecrementAssign";l[l.TypeEqual=81]="TypeEqual";l[l.OnesComplement=82]="OnesComplement";l[l.IsTrue=83]="IsTrue";l[l.IsFalse=84]="IsFalse"})(k.ExpressionType||(k.ExpressionType={}));var i=k.ExpressionType})(h.Meta||(h.Meta={}));var g=h.Meta})(f||(f={}));var f;(function(h){var g=(function(){function i(j){h.Sanitizer.Require(j,{inputName:"NodeType",inputConstructor:Number},{inputName:"ExpressionType",inputConstructor:Number});this.NodeType=j.NodeType;this.ExpressionType=j.ExpressionType}i.prototype.Compile=function(){if(!this._Compiled){this._Compiled=this._Compile()}return this._Compiled};i.prototype._Compile=function(){throw"Invalid operation"};i.prototype.GetAffectedProperties=function(){return[]};i.CreateExpression=function(j){if(j.NodeType===h.Meta.ExpressionType.Assign&&j.ExpressionType===h.Meta.ExpressionWrapperType.Binary){return new h.AssignmentExpression(j)}if(i.ExpressionConstructorDictionary[j.ExpressionType]){return i.ExpressionConstructorDictionary[j.ExpressionType](j)}throw"Invalid expression type"};i.ExpressionConstructorDictionary=(function(){var j={};j[h.Meta.ExpressionWrapperType.Binary]=function(k){return new h.BinaryExpression(k)};j[h.Meta.ExpressionWrapperType.Block]=function(k){return new h.BlockExpression(k)};j[h.Meta.ExpressionWrapperType.Conditional]=function(k){return new h.ConditionalExpression(k)};j[h.Meta.ExpressionWrapperType.Constant]=function(k){return new h.ConstantExpression(k)};j[h.Meta.ExpressionWrapperType.Default]=function(k){return new h.DefaultExpression(k)};j[h.Meta.ExpressionWrapperType.Member]=function(k){return new h.MemberExpression(k)};j[h.Meta.ExpressionWrapperType.StaticMember]=function(k){return new h.StaticMemberExpression(k)};j[h.Meta.ExpressionWrapperType.MethodCall]=function(k){return new h.MethodCallExpression(k)};j[h.Meta.ExpressionWrapperType.StaticMethodCall]=function(k){return new h.StaticMethodCallExpression(k)};j[h.Meta.ExpressionWrapperType.Parameter]=function(k){return new h.ParameterExpression(k)};j[h.Meta.ExpressionWrapperType.Unary]=function(k){return new h.UnaryExpression(k)};j[h.Meta.ExpressionWrapperType.Invocation]=function(k){return new h.InvocationExpression(k)};j[h.Meta.ExpressionWrapperType.New]=function(k){return new h.NewExpression(k)};return j})();return i})();h.Expression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});switch(k.Left.ExpressionType){case h.Meta.ExpressionWrapperType.Parameter:this.Left=null;this.LeftProperty=(k.Left).Name;break;case h.Meta.ExpressionWrapperType.StaticMember:case h.Meta.ExpressionWrapperType.Member:this.Left=h.Expression.CreateExpression((k.Left).Expression);this.LeftProperty=(k.Left).MemberName;break;default:throw"The left hand side of an assignment must be a parameter or a member"}this.Right=h.Expression.CreateExpression(k.Right)}j.prototype._Compile=function(){var k=this;var l=this.Left?this.Left.Compile():function(n){return n};var m=this.Right.Compile();return function(n){return l(n)[k.LeftProperty]=m(n)}};return j})(h.Expression);h.AssignmentExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(i){var h=i.Meta;var g=(function(j){a(k,j);function k(l){j.call(this,l);if(!k.OperatorDictionary[this.NodeType]){throw"##Invalid Operator"}i.Sanitizer.Require(l,{inputName:"Left",inputType:"object"},{inputName:"Right",inputType:"object"});this.Left=i.Expression.CreateExpression(l.Left);this.Right=i.Expression.CreateExpression(l.Right)}k.prototype._Compile=function(){var l=this;if(!k.OperatorStringDictionary[this.NodeType]){throw"Invalid expression type"}var m=this.Left.Compile();var n=this.Right.Compile();return function(o){return k.OperatorDictionary[l.NodeType](m(o),n(o))}};k.OperatorDictionary=(function(){var l=[];l[i.Meta.ExpressionType.Add]=function(m,n){return m+n};l[i.Meta.ExpressionType.AndAlso]=function(m,n){return m&&n};l[i.Meta.ExpressionType.Divide]=function(m,n){return m/n};l[i.Meta.ExpressionType.Equal]=function(m,n){return m===n};l[i.Meta.ExpressionType.GreaterThan]=function(m,n){return m>n};l[i.Meta.ExpressionType.GreaterThanOrEqual]=function(m,n){return m>=n};l[i.Meta.ExpressionType.LessThan]=function(m,n){return m<n};l[i.Meta.ExpressionType.LessThanOrEqual]=function(m,n){return m<=n};l[i.Meta.ExpressionType.Multiply]=function(m,n){return m*n};l[i.Meta.ExpressionType.NotEqual]=function(m,n){return m!==n};l[i.Meta.ExpressionType.OrElse]=function(m,n){return m||n};l[i.Meta.ExpressionType.Subtract]=function(m,n){return m-n};return l})();k.OperatorStringDictionary=(function(){var l=[];l[i.Meta.ExpressionType.Add]=" + ";l[i.Meta.ExpressionType.AndAlso]=" && ";l[i.Meta.ExpressionType.Divide]=" / ";l[i.Meta.ExpressionType.Equal]=" === ";l[i.Meta.ExpressionType.GreaterThan]=" > ";l[i.Meta.ExpressionType.GreaterThanOrEqual]=" >= ";l[i.Meta.ExpressionType.LessThan]=" < ";l[i.Meta.ExpressionType.LessThanOrEqual]=" <= ";l[i.Meta.ExpressionType.Multiply]=" * ";l[i.Meta.ExpressionType.NotEqual]=" !== ";l[i.Meta.ExpressionType.OrElse]=" || ";l[i.Meta.ExpressionType.Subtract]=" - ";return l})();return k})(i.Expression);i.BinaryExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"Expressions",inputConstructor:Array});this.Expressions=linq(k.Expressions).Select(function(l){return h.Expression.CreateExpression(l)}).Result}j.prototype._Compile=function(){var k=linq(this.Expressions).Select(function(l){return l.Compile()}).Result;return function(l){return linq(k).Each(function(m){return m(l)})}};return j})(h.Expression);h.BlockExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"IfTrue",inputType:"object"},{inputName:"IfFalse",inputType:"object"},{inputName:"Test",inputType:"object"});this.IfTrue=h.Expression.CreateExpression(k.IfTrue);this.IfFalse=h.Expression.CreateExpression(k.IfFalse);this.Test=h.Expression.CreateExpression(k.Test)}j.prototype._Compile=function(){var m=this.Test.Compile();var l=this.IfTrue.Compile();var k=this.IfFalse.Compile();return function(n){return m(n)?l(n):k(n)}};return j})(h.Expression);h.ConditionalExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);this.Value=k.Value}j.prototype._Compile=function(){var k=this;return function(l){return k.Value}};j.ConstantParameter="__constants";j.GenerateConstantId=(function(){var k=0;return function(){return"constant-"+(++k)}})();return j})(h.Expression);h.ConstantExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k)}j.prototype._Compile=function(){return function(k){return null}};return j})(h.Expression);h.DefaultExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"Expression",inputType:"object"},{inputName:"Arguments",inputConstructor:Array});this.Expression=h.Expression.CreateExpression(k.Expression);this.Arguments=linq(k.Arguments).Select(function(l){return h.Expression.CreateExpression(l)}).Result}j.prototype._Compile=function(){var l=this.Expression.Compile();var k=linq(this.Arguments).Select(function(m){return m.Compile()}).Result;return function(m){var n=l(m);var o=linq(k).Select(function(p){return p(m)}).Result;return n.apply(m,o)}};return j})(h.Expression);h.InvocationExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(j){var h=(function(k){a(l,k);function l(m){k.call(this,m);j.Sanitizer.Require(m,{inputName:"MemberName",inputConstructor:String});this.MemberName=m.MemberName}l.prototype._Compile=function(){if(!j.Utils.CustomClassHandler.PropertyRegex.test(this.MemberName)){throw"Invalid property name: "+this.MemberName}var n=this.MemberName;var m=this._CompileMemberContext();return function(o){return m(o)[n]}};l.prototype._CompileMemberContext=function(){throw"This method is abstract"};return l})(j.Expression);j.MemberExpressionBase=h;var g=(function(k){a(l,k);function l(m){k.call(this,m);j.Sanitizer.Require(m,{inputName:"Expression",inputType:"object"});this.Expression=j.Expression.CreateExpression(m.Expression)}l.prototype._CompileMemberContext=function(){return this.Expression.Compile()};return l})(h);j.MemberExpression=g;var i=(function(k){a(l,k);function l(m){k.call(this,m);j.Sanitizer.Require(m,{inputName:"Class",inputType:"string"});this.Class=j.Utils.CustomClassHandler.SplitNamespace(m.Class)}l.prototype._CompileMemberContext=function(){var m=j.Utils.CustomClassHandler.GetClass(this.Class);return function(n){return m}};return l})(h);j.StaticMemberExpression=i})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(j){var h=(function(k){a(l,k);function l(m){k.call(this,m);j.Sanitizer.Require(m,{inputName:"Arguments",inputConstructor:Array},{inputName:"MethodName",inputConstructor:String});this.Arguments=linq(m.Arguments).Select(function(n){return j.Expression.CreateExpression(n)}).Result;this.MethodName=m.MethodName}l.prototype._Compile=function(){var m=this;if(!j.Utils.CustomClassHandler.PropertyRegex.test(this.MethodName)){throw"Invalid method name: "+this.MethodName}var o=this.MethodName;var p=this._CompileMethodCallContext();var n=linq(this.Arguments).Select(function(q){return q.Compile()}).Result;return function(q){var s=linq(n).Select(function(t){return t(q)}).Result;var r=p(q);return r[m.MethodName].apply(r,s)}};l.prototype._CompileMethodCallContext=function(){throw"This method is abstract"};return l})(j.Expression);j.MethodCallExpressionBase=h;var g=(function(k){a(l,k);function l(m){k.call(this,m);j.Sanitizer.Require(m,{inputName:"Object",inputType:"object"});this.Object=j.Expression.CreateExpression(m.Object)}l.prototype._CompileMethodCallContext=function(){return this.Object.Compile()};l.RegisteredMethods={};return l})(h);j.MethodCallExpression=g;var i=(function(k){a(l,k);function l(m){k.call(this,m);j.Sanitizer.Require(m,{inputName:"Class",inputType:"string"});this.Class=j.Utils.CustomClassHandler.SplitNamespace(m.Class)}l.prototype._CompileMethodCallContext=function(){var m=this;return function(n){return j.Utils.CustomClassHandler.GetClass(m.Class)}};return l})(h);j.StaticMethodCallExpression=i})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"Arguments",inputConstructor:Array},{inputName:"IsAnonymous",inputConstructor:Boolean},{inputName:"Type",inputConstructor:String});if(k.IsAnonymous){h.Sanitizer.Require(k,{inputName:"Members",inputConstructor:Array});if(k.Members.length!==k.Arguments.length){throw"If members are defined, each must have a corresponding argument"}}this.Arguments=linq(k.Arguments).Select(function(l){return h.Expression.CreateExpression(l)}).Result;this.Members=k.Members;this.Type=k.Type;this.IsAnonymous=k.IsAnonymous}j.prototype._Compile=function(){var k=this;var l=linq(this.Arguments).Select(function(m){return m.Compile()}).Result;return function(m){var n=linq(l).Select(function(o){return o(m)}).Result;if(k.IsAnonymous){return k.ConstructAnonymous(n)}else{if(j.RegisteredTypes[k.Type]){return j.Construct(j.RegisteredTypes[k.Type],n)}else{return{}}}}};j.prototype.ConstructAnonymous=function(n){var m={};for(var k=0,l=this.Members.length;k<l;k++){m[this.Members[k]]=n[k]}return m};j.Construct=function(l,k){var m=Object.create(l.prototype);var n=l.apply(m,k);return typeof n==="object"?n:m};j.RegisteredTypes={};return j})(h.Expression);h.NewExpression=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"Name",inputConstructor:String});this.Name=k.Name}j.prototype._Compile=function(){var k=this;return function(l){return l[k.Name]}};return j})(h.Expression);h.ParameterExpression=g})(f||(f={}));var f;(function(h){h.Initialize=function(i){};var g=(function(){function i(){}i.Require=function(m){var o=[];for(var j=0;j<(arguments.length-1);j++){o[j]=arguments[j+1]}if(m==null){throw"Item must have a value"}for(var k=0,l=o.length;k<l;k++){var n=o[k];if(n.allowNull&&m[n.inputName]==null){return}if(!n.allowNull&&m[n.inputName]==null){throw"Property "+n.inputName+" cannot be null"}if(n.inputType&&typeof m[n.inputName]!==n.inputType){throw"Property "+n.inputName+" must be of type "+n.inputType}if(n.inputConstructor&&m[n.inputName].constructor!==n.inputConstructor){throw {message:"Property "+n.inputName+" must be of a give type",type:n.inputConstructor}}}};return i})();h.Sanitizer=g})(f||(f={}));var a=this.__extends||function(i,h){for(var j in h){if(h.hasOwnProperty(j)){i[j]=h[j]}}function g(){this.constructor=i}g.prototype=h.prototype;i.prototype=new g()};var f;(function(h){var g=(function(i){a(j,i);function j(k){i.call(this,k);h.Sanitizer.Require(k,{inputName:"Operand",inputType:"object"});this.Operand=h.Expression.CreateExpression(k.Operand)}j.prototype._Compile=function(){var k=this;var l=this.Operand.Compile();return function(m){return j.OperatorDictionary[k.NodeType](l(m))}};j.OperatorDictionary=(function(){var k=[];k[h.Meta.ExpressionType.Convert]=function(l){return l};k[h.Meta.ExpressionType.Not]=function(l){return !l};return k})();j.OperatorStringDictionary=(function(){var k=[];k[h.Meta.ExpressionType.Convert]=function(l){return l};k[h.Meta.ExpressionType.Not]=function(l){return"!"+l};return k})();return j})(h.Expression);h.UnaryExpression=g})(f||(f={}));var c=(function(){function g(){}g.createExpression=f.Expression.CreateExpression;g.registeredConstructors=f.NewExpression.RegisteredTypes;g.registeredMethods=f.MethodCallExpression.RegisteredMethods;return g})();window.ex=c})();